!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CSSMangleWebpackPlugin={})}(this,(function(e){"use strict";class t{static replaceRange(e,t,n,s){return e.substring(0,t)+s+e.substring(n)}}class n{}class s extends n{transform(e,n){const s=e.matchAll(/--[\w-]+(?=\s*: ?.+;)/g);let a=0;for(const r of s){const s=r[0],l=r.index-a,o=n.transform(s),c=t.replaceRange(e,l,l+s.length,`--${o}`);a+=e.length-c.length,e=c}return e}}class a{}class r extends a{transform(e,n){const s=e.matchAll(/(?<="|')--[\w-]+(?=\\?\"|')/g),a=e.matchAll(/(?<=var\()[^()]*(?:\([^\)]*\)[^()]*)*(?=\))/g);let r=0;for(const a of s){const s=a[0],l=a.index-r,o=t.replaceRange(e,l,l+s.length,n.CSSVariableOf(s));r+=e.length-o.length,e=o}for(const s of a){const a=s[0].matchAll(/--[\w-]+/g),l=s.index;for(const s of a){const a=s[0],o=l+s.index-r,c=t.replaceRange(e,o,o+a.length,n.CSSVariableOf(a));r+=e.length-c.length,e=c}}return e}}class l{constructor(){this.count=0,this.chars="abcdefghijklmnopqrstuvwxyz",this.cache=new Map}createName(e=this.count++){let t="",n=this.chars.length;for(;e>=0&&(t=this.chars[e%n]+t,e>0);)e=Math.floor(e/n)-1;return t}transform(e){var t;return null!==(t=this.cache[e])&&void 0!==t?t:this.cache[e]=this.createName()}CSSVariableOf(e){return this.cache[e]?`--${this.transform(e)}`:e}}e.CSSVariableDeclaration=s,e.CSSVariableReference=r,e.Mangler=l,e.ManglerDeclaration=n,e.ManglerReference=a,e.default=class{constructor(e){var t,n;this.options=e,this.transpilers=[],(null===(n=null===(t=null==e?void 0:e.mangle)||void 0===t?void 0:t.staticVariable)||void 0===n||n)&&this.transpilers.push({declaration:new s,reference:new r,mangler:new l})}apply(e){e.hooks.compilation.tap("CSSMangleWebpackPlugin",(t=>{t.hooks.processAssets.tap({name:"CSSMangleWebpackPlugin",stage:e.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(n=>{for(const s in n)if(s.endsWith(".html")||s.endsWith(".js")||s.endsWith(".jsx")||s.endsWith(".css"))for(const a of this.transpilers){const r=n[s].source().toString(),l=a.declaration.transform(r,a.mangler),o=a.reference.transform(l,a.mangler);t.updateAsset(s,new e.webpack.sources.RawSource(o))}}))}))}},Object.defineProperty(e,"__esModule",{value:!0})}));
