!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).CSSMangleWebpackPlugin={})}(this,(function(t){"use strict";class e{static replaceRange(t,e,s,n){return t.substring(0,e)+n+t.substring(s)}}class s{constructor(){this.count=0,this.chars="abcdefghijklmnopqrstuvwxyz",this.cache=new Map}static get instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new s}createName(t=this.count++){let e="",s=this.chars.length;for(;t>=0&&(e=this.chars[t%s]+e,t>0);)t=Math.floor(t/s)-1;return e}transform(t){var e;return null!==(e=this.cache[t])&&void 0!==e?e:this.cache[t]=this.createName()}}class n{static transform(t){return this.transformVariable(t)}static transformVariable(t){const n=t.matchAll(/(?<=var\()--\w+(?=\))|((?<="|')--\w+(?="|'))/g);let a=0;for(const r of n){const n=r[0],c=r.index-a,i=e.replaceRange(t,c,c+n.length,s.instance.cache[n]?`--${s.instance.transform(n)}`:n);a+=t.length-i.length,t=i}return t}}class a{static variable(t){const n=t.matchAll(/--[\w-]+(?=\s*: ?\w+;)/g);let a=0;for(const r of n){const n=r[0],c=r.index-a,i=s.instance.transform(n),o=e.replaceRange(t,c,c+n.length,`--${i}`);a+=t.length-o.length,t=o}return t}}t.Mangler=s,t.ManglerParser=a,t.ManglerTranspiler=n,t.default=class{constructor(t){this.options=t}apply(t){t.hooks.compilation.tap("CSSMangleWebpackPlugin",(e=>{e.hooks.processAssets.tap({name:"CSSMangleWebpackPlugin",stage:t.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(s=>{for(const r in s)if(r.endsWith(".html")||r.endsWith(".js")||r.endsWith(".jsx")||r.endsWith(".css")){const c=s[r].source().toString(),i=a.variable(c),o=n.transform(i);e.updateAsset(r,new t.webpack.sources.RawSource(o))}}))}))}},Object.defineProperty(t,"__esModule",{value:!0})}));
