!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).CSSMangleWebpackPlugin={})}(this,(function(e){"use strict";class n{static replaceRange(e,n,t,s){return e.substring(0,n)+s+e.substring(t)}}class t{}class s extends t{transform(e,t){const s=[...e.matchAll(/--[\w-]+(?=\s*: ?.+;)/g),...e.matchAll(/(?<=@property )--[a-zA-Z0-9_-]+(?=\s*{[^{}]*})/g)];let o=0;for(const r of s){const s=r[0],a=r.index-o,l=t.transform(s),i=n.replaceRange(e,a,a+s.length,`--${l}`);o+=e.length-i.length,e=i}return e}}class o extends t{constructor(e){super()}transform(e,n){const t=/((:|::)\w+(\([\w='"]+\))?)?/.source,s=`${`${/(\.|.#)[a-zA-Z0-9_-]+/.source}${t}`}(?=(${`\\s+(\\w*(${`${/(\.|.#)?[a-zA-Z0-0_-]+/.source}${t}`})?)\\s*`})*\\{)`,o=e.matchAll(new RegExp(s,"g"));console.log(s);for(const e of o)console.log(e[0]);return e}transformId(){}transformClass(){}}class r{}class a extends r{transform(e,t){const s=e.matchAll(/(?<="|')--[\w-]+(?=\\?\"|')/g),o=e.matchAll(/(?<=var\()[^()]*(?:\([^\)]*\)[^()]*)*(?=\))/g);let r=0;for(const o of s){const s=o[0],a=o.index-r,l=t.CSSVariableOf(s);if(l){const t=n.replaceRange(e,a,a+s.length,l);r+=e.length-t.length,e=t}}for(const s of o){const o=s[0].matchAll(/--[\w-]+/g),a=s.index;for(const s of o){const o=s[0],l=a+s.index-r,i=t.CSSVariableOf(o);if(i){const t=n.replaceRange(e,l,l+o.length,i);r+=e.length-t.length,e=t}}}return e}}class l extends r{transform(e,n){return e}}class i{constructor(){this.count=0,this.cache=new Map}createName(e=this.count++){let n="",t=i.chars.length;for(;e>=0&&(n=i.chars[e%t]+n,e>0);)e=Math.floor(e/t)-1;return n}transform(e){let n=this.cache.get(e);return n?(n.referenceCount+=1,n.identifierName):(this.cache.set(e,{originalName:e,identifierName:this.createName(),referenceCount:0}),this.cache.get(e).identifierName)}CSSVariableOf(e){return this.cache.get(e)?`--${this.transform(e)}`:null}printLogs(){console.log(this.cache)}printLogsUnused(){for(const e of this.cache.values())0==e.referenceCount&&console.log(`${e.originalName} is not referenced.`)}}i.chars="abcdefghijklmnopqrstuvwxyz";e.CSSVariableDeclaration=s,e.CSSVariableReference=a,e.Mangler=i,e.ManglerDeclaration=t,e.ManglerReference=r,e.default=class{constructor(e){var n,t,r,c,f,g;this.options=e,this.transpilers=[],(null===(t=null===(n=null==e?void 0:e.mangle)||void 0===n?void 0:n.variableName)||void 0===t||t)&&this.transpilers.push({declaration:new s,reference:new a,mangler:new i});const h=null!==(c=null===(r=null==e?void 0:e.mangle)||void 0===r?void 0:r.className)&&void 0!==c&&c,u=null!==(g=null===(f=null==e?void 0:e.mangle)||void 0===f?void 0:f.idName)&&void 0!==g&&g;(h||u)&&this.transpilers.push({declaration:new o({className:h,idName:u}),reference:new l,mangler:new i})}apply(e){var n,t;const s=!(null!==(t=null===(n=this.options)||void 0===n?void 0:n.ignoreScript)&&void 0!==t&&t);e.hooks.compilation.tap("CSSMangleWebpackPlugin",(n=>{n.hooks.processAssets.tap({name:"CSSMangleWebpackPlugin",stage:e.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(t=>{var o,r,a,l;for(const o in t)if(o.endsWith(".html")||o.endsWith(".js")&&s||o.endsWith(".jsx")&&s||o.endsWith(".css"))for(const s of this.transpilers){const r=t[o].source().toString(),a=s.declaration.transform(r,s.mangler),l=s.reference.transform(a,s.mangler);n.updateAsset(o,new e.webpack.sources.RawSource(l))}null!==(r="all"==(null===(o=this.options)||void 0===o?void 0:o.printLogs))&&void 0!==r&&r&&this.transpilers.forEach((e=>e.mangler.printLogs())),null!==(l="warning"==(null===(a=this.options)||void 0===a?void 0:a.printLogs))&&void 0!==l&&l&&this.transpilers.forEach((e=>e.mangler.printLogsUnused()))}))}))}},Object.defineProperty(e,"__esModule",{value:!0})}));
