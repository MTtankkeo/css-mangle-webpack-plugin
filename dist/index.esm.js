class t{static replaceRange(t,s,e,a){return t.substring(0,s)+a+t.substring(e)}}class s{constructor(){this.count=0,this.chars="abcdefghijklmnopqrstuvwxyz",this.cache=new Map}static get instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new s}createName(t=this.count++){let s="",e=this.chars.length;for(;t>=0&&(s=this.chars[t%e]+s,t>0);)t=Math.floor(t/e)-1;return s}transform(t){var s;return null!==(s=this.cache[t])&&void 0!==s?s:this.cache[t]=this.createName()}}class e{static transform(t){return this.transformVariable(t)}static transformVariable(e){const a=e.matchAll(/(?<=var\()--\w+(?=\))|((?<="|')--\w+(?="|'))/g);let n=0;for(const r of a){const a=r[0],c=r.index-n,i=t.replaceRange(e,c,c+a.length,s.instance.cache[a]?`--${s.instance.transform(a)}`:a);n+=e.length-i.length,e=i}return e}}class a{static variable(e){const a=e.matchAll(/--[\w-]+(?=\s*: ?\w+;)/g);let n=0;for(const r of a){const a=r[0],c=r.index-n,i=s.instance.transform(a),o=t.replaceRange(e,c,c+a.length,`--${i}`);n+=e.length-o.length,e=o}return e}}class n{constructor(t){this.options=t}apply(t){t.hooks.compilation.tap("CSSMangleWebpackPlugin",(s=>{s.hooks.processAssets.tap({name:"CSSMangleWebpackPlugin",stage:t.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(n=>{for(const r in n)if(r.endsWith(".html")||r.endsWith(".js")||r.endsWith(".jsx")||r.endsWith(".css")){const c=n[r].source().toString(),i=a.variable(c),o=e.transform(i);s.updateAsset(r,new t.webpack.sources.RawSource(o))}}))}))}}export{s as Mangler,a as ManglerParser,e as ManglerTranspiler,n as default};
