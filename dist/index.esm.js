class t{static replaceRange(t,s,e,n){return t.substring(0,s)+n+t.substring(e)}}class s{constructor(){this.count=0,this.chars="abcdefghijklmnopqrstuvwxyz",this.cache=new Map}static get instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new s}createName(t=this.count++){let s="",e=this.chars.length;for(;t>=0&&(s=this.chars[t%e]+s,t>0);)t=Math.floor(t/e)-1;return s}transform(t){var s;return null!==(s=this.cache[t])&&void 0!==s?s:this.cache[t]=this.createName()}}class e{}class n extends e{transform(e){const n=e.matchAll(/--[\w-]+(?=\s*: ?.+;)/g);let a=0;for(const r of n){const n=r[0],c=r.index-a,o=s.instance.transform(n),i=t.replaceRange(e,c,c+n.length,`--${o}`);a+=e.length-i.length,e=i}return e}}class a{}class r extends a{transform(e){const n=e.matchAll(/(?<=var\()--[\w-]+(?=\))|((?<="|')--[\w-]+(?="|'))/g);let a=0;for(const r of n){const n=r[0],c=r.index-a,o=t.replaceRange(e,c,c+n.length,s.instance.cache[n]?`--${s.instance.transform(n)}`:n);a+=e.length-o.length,e=o}return e}}class c{constructor(t){var s,e;this.options=t,this.transpilers=[],(null===(e=null===(s=null==t?void 0:t.mangle)||void 0===s?void 0:s.staticVariable)||void 0===e||e)&&this.transpilers.push({declaration:new n,reference:new r})}apply(t){t.hooks.compilation.tap("CSSMangleWebpackPlugin",(s=>{s.hooks.processAssets.tap({name:"CSSMangleWebpackPlugin",stage:t.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(e=>{for(const n in e)if(n.endsWith(".html")||n.endsWith(".js")||n.endsWith(".jsx")||n.endsWith(".css"))for(const a of this.transpilers){const r=e[n].source().toString(),c=a.declaration.transform(r),o=a.reference.transform(c);s.updateAsset(n,new t.webpack.sources.RawSource(o))}}))}))}}export{n as CSSVariableDeclaration,r as CSSVariableReference,s as Mangler,e as ManglerDeclaration,a as ManglerReference,c as default};
