class t{static replaceRange(t,e,s,n){return t.substring(0,e)+n+t.substring(s)}}class e{}class s extends e{transform(e,s){const n=e.matchAll(/--[\w-]+(?=\s*: ?.+;)/g);let a=0;for(const r of n){const n=r[0],c=r.index-a,l=s.transform(n),o=t.replaceRange(e,c,c+n.length,`--${l}`);a+=e.length-o.length,e=o}return e}}class n{}class a extends n{transform(e,s){const n=e.matchAll(/(?<="|')--[\w-]+(?=\\?\"|')/g),a=e.matchAll(/(?<=var\()[^()]*(?:\([^\)]*\)[^()]*)*(?=\))/g);let r=0;for(const a of n){const n=a[0],c=a.index-r,l=t.replaceRange(e,c,c+n.length,s.CSSVariableOf(n));r+=e.length-l.length,e=l}for(const n of a){const a=n[0].matchAll(/--[\w-]+/g),c=n.index;for(const n of a){const a=n[0],l=c+n.index-r,o=t.replaceRange(e,l,l+a.length,s.CSSVariableOf(a));r+=e.length-o.length,e=o}}return e}}class r{constructor(){this.count=0,this.chars="abcdefghijklmnopqrstuvwxyz",this.cache=new Map}createName(t=this.count++){let e="",s=this.chars.length;for(;t>=0&&(e=this.chars[t%s]+e,t>0);)t=Math.floor(t/s)-1;return e}transform(t){var e;return null!==(e=this.cache[t])&&void 0!==e?e:this.cache[t]=this.createName()}CSSVariableOf(t){return this.cache[t]?`--${this.transform(t)}`:t}}class c{constructor(t){var e,n;this.options=t,this.transpilers=[],(null===(n=null===(e=null==t?void 0:t.mangle)||void 0===e?void 0:e.staticVariable)||void 0===n||n)&&this.transpilers.push({declaration:new s,reference:new a,mangler:new r})}apply(t){t.hooks.compilation.tap("CSSMangleWebpackPlugin",(e=>{e.hooks.processAssets.tap({name:"CSSMangleWebpackPlugin",stage:t.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(s=>{for(const n in s)if(n.endsWith(".html")||n.endsWith(".js")||n.endsWith(".jsx")||n.endsWith(".css"))for(const a of this.transpilers){const r=s[n].source().toString(),c=a.declaration.transform(r,a.mangler),l=a.reference.transform(c,a.mangler);e.updateAsset(n,new t.webpack.sources.RawSource(l))}}))}))}}export{s as CSSVariableDeclaration,a as CSSVariableReference,r as Mangler,e as ManglerDeclaration,n as ManglerReference,c as default};
