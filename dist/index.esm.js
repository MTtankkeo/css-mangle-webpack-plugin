class t{static replaceRange(t,s,n,e){return t.substring(0,s)+e+t.substring(n)}}class s{constructor(){this.count=0,this.chars="abcdefghijklmnopqrstuvwxyz",this.cache=new Map}static get instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new s}createName(t=this.count++){let s="",n=this.chars.length;for(;t>=0&&(s=this.chars[t%n]+s,t>0);)t=Math.floor(t/n)-1;return s}transform(t){var s;return null!==(s=this.cache[t])&&void 0!==s?s:this.cache[t]=this.createName()}}class n{}class e extends n{transform(n){const e=n.matchAll(/--[\w-]+(?=\s*: ?\w+;)/g);let a=0;for(const r of e){const e=r[0],c=r.index-a,i=s.instance.transform(e),o=t.replaceRange(n,c,c+e.length,`--${i}`);a+=n.length-o.length,n=o}return n}}class a{}class r extends a{transform(n){const e=n.matchAll(/(?<=var\()--\w+(?=\))|((?<="|')--\w+(?="|'))/g);let a=0;for(const r of e){const e=r[0],c=r.index-a,i=t.replaceRange(n,c,c+e.length,s.instance.cache[e]?`--${s.instance.transform(e)}`:e);a+=n.length-i.length,n=i}return n}}class c{constructor(t){var s,n;this.options=t,this.transpilers=[],(null===(n=null===(s=null==t?void 0:t.mangle)||void 0===s?void 0:s.staticVariable)||void 0===n||n)&&this.transpilers.push({declaration:new e,definition:new r})}apply(t){t.hooks.compilation.tap("CSSMangleWebpackPlugin",(s=>{s.hooks.processAssets.tap({name:"CSSMangleWebpackPlugin",stage:t.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE},(n=>{for(const e in n)if(e.endsWith(".html")||e.endsWith(".js")||e.endsWith(".jsx")||e.endsWith(".css"))for(const a of this.transpilers){const r=n[e].source().toString(),c=a.declaration.transform(r),i=a.definition.transform(c);s.updateAsset(e,new t.webpack.sources.RawSource(i))}}))}))}}export{e as CSSVariableDeclaration,s as Mangler,n as ManglerDeclaration,c as default};
